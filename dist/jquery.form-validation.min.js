/*! Form Validation - v0.1.0 - 2015-02-05
* https://github.com/djembuka/form-validation
* Copyright (c) 2015 Tatiana; Licensed MIT */
!function(a){"use strict";function b(a){this.init(a)}a.fn.form_validation=function(){return this.each(function(){var c=a(this);c.instance||new b(this)})},b.prototype.init=function(b){this.$elem=a(b),this.$elem.data("Form",this),this.submitFlag=0,this.firstElement=void 0,this.$submitButton=this.$elem.find("[type=submit]"),this.$submitButton.click(this.clickSubmitButton),this.$elem.submit(this.submitForm),this.$elem.find(".b-input-text").focus(this.focusElement)},b.prototype.clickSubmitButton=function(b){var c=a(b.target).closest("form").data("Form");c.$elem.submit(),b.preventDefault()},b.prototype.submitForm=function(b){var c=a(b.target).data("Form");return c.$submitButton.hasClass("i-disabled")||!c.isValid()?(b.preventDefault(),void(c.testFlag=c.testFlag?"prevent submition":void 0)):void(c.testFlag&&(c.testFlag="form submition",b.preventDefault()))},b.prototype.focusElement=function(b){var c=a(b.target),d=c.closest("form").data("Form");d.removeWarning(c)},b.prototype.setWarning=function(a){a.closest(".b-form-field").addClass("i-warning"),a.closest(".b-checkbox").addClass("i-warning"),0===this.submitFlag&&(this.firstElement=a),this.submitFlag=1},b.prototype.removeWarning=function(a){a.closest(".b-form-field").removeClass("i-warning")},b.prototype.isValid=function(){function b(){if(g.submitFlag=0,g.firstElement=void 0,e(),f(),c(),d(),0===g.submitFlag)return!0;var b=window.pageYOffset||document.documentElement.scrollTop;if(g.firstElement.offset().top-b<0){var h=g.firstElement.offset().top-50;a.scrollTo&&a.scrollTo(h,500),void 0!==g.firstElement&&g.firstElement.focus()}return!1}function c(){var b={};g.$elem.find("[data-equal]").each(function(){var c=a(this),d=c.attr("data-equal");b[d]||(b[d]=g.$elem.find("[data-equal="+d+"]"))});var c;a.each(b,function(d){c=!0;var e=a.trim(a(b[d][0]).val());b[d].each(function(){a.trim(a(this).val())!==e&&(c=!1)}),b[d].each(c?function(){g.removeWarning(a(this))}:function(){g.setWarning(a(this))})})}function d(){g.$elem.find(".b-select.i-required").each(function(){""===a(this).find("input:hidden").val()?g.setWarning(a(this)):g.removeWarning(a(this))}),g.$elem.find("[required]").each(function(){var b=a(this),c=a.trim(b.val());b.is("[type=radio]")?0===b.closest(".b-form-field").find("input:checked").size()&&g.setWarning(b):b.is("[type=checkbox]")?b.is(":checked")?g.removeWarning(b):g.setWarning(b):b.is("[data-equal]")?""===a.trim(b.val())&&g.setWarning(b):""===c?g.setWarning(b):b.is("[type=email]")||b.is("[type=tel]")||b.is("[type=number]")||b.is("[type=url]")||g.removeWarning(b)})}function e(){function b(){g.$elem.find("input:visible[type=password]").each(function(){var b=a(this),c=a.trim(b.val()),d=6;c.length<d?g.setWarning(b):g.removeWarning(b)})}function c(){g.$elem.find("[type=email]").each(function(){var b=a(this),c=a.trim(b.val()),d=/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i;""===c||d.test(c)?g.removeWarning(b):g.setWarning(b)})}function d(){g.$elem.find("[type=tel]").each(function(){var b=a(this),c=a.trim(b.val()),d=/^([0-9-()\++\s]{5,})$/i;""===c||d.test(c)?g.removeWarning(b):g.setWarning(b)})}function e(){g.$elem.find("[type=number]").each(function(){var b=a(this),c=a.trim(b.val()),d=/^([0-9\s\.,]+){5,}$/i;""===c||d.test(c)?g.removeWarning(b):g.setWarning(b)})}function f(){g.$elem.find("[type=url]").each(function(){var b=a(this),c=a.trim(b.val()),d=/^((https?:\/\/)?(www\.)?([-a-z0-9]+\.)+[a-z]{2,}(\/[-\w]+)?(\/[-\w]+\.[a-z]{2,})?\/?(#[-\w]+)?(\?[-\w=&]+)?)$/i;""===c||d.test(c)?g.removeWarning(b):g.setWarning(b)})}b(),c(),d(),e(),f()}function f(){var b={};g.$elem.find("[data-or]").each(function(){var c=a(this),d=c.attr("data-or");b[d]||(b[d]=g.$elem.find("[data-or="+d+"]"))});var c;a.each(b,function(d){c=0,b[d].each(function(){""!==a.trim(a(this).val())&&c++}),b[d].each(0===c?function(){g.setWarning(a(this))}:function(){g.removeWarning(a(this))})})}var g=this;return b()}}(jQuery);